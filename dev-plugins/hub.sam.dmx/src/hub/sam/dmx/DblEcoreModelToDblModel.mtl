[comment encoding = UTF-8 /]
[module DblEcoreModelToDblModel('http://www.eclipse.org/emf/2002/Ecore')/]

[template public DblEcoreModelToDblModel(pkg : EPackage)]
[comment @main /]

[file (pkg.name.concat('.dbl'), false, 'UTF-8')]
	module [pkg.name/] {
		interface EObject {
			EObject eContainer();
		}
	[for (class : EClass | pkg.eClassifiers->filter(EClass))]
		interface [class.name/] extends EObject[if (class.eSuperTypes->size() > 0)][genSuperClasses(class)/][/if] {
		[for (feature : EStructuralFeature | class.eStructuralFeatures)]
			[genType(feature)/] [if (feature.eType.name = 'EBoolean')]is[else]get[/if][feature.name.toUpperFirst()/]();
		[/for]
		}
	[/for]
	}
[/file]
	
[/template]

[template public genType(typedElement : ETypedElement)]
[if (not typedElement.eType.oclIsUndefined())]
	[if (typedElement.many)]list([typedElement.eType.name/])
	[else][genType2(typedElement)/][/if]
[else]void[/if]
[/template]

[template public genType2(typedElement : ETypedElement)]
[if (typedElement.eType.name = 'EInt')]
	int
[elseif (typedElement.eType.name = 'EBigInteger')]
	int
[elseif (typedElement.eType.name = 'EDouble')]
	double
[elseif (typedElement.eType.name = 'EBoolean')]
	boolean
[elseif (typedElement.eType.name = 'EObject')]
	Object
[elseif (typedElement.eType.name = 'EString')]
	string
[else]
	[typedElement.eType.name/]
[/if]
[/template]

[template public genSuperClasses(class : EClass)]
[for (superClass : EClass | class.eSuperTypes)], [superClass.name/][/for]
[/template]